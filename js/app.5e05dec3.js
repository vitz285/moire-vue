(function(){"use strict";var e={1742:function(e,t,a){var r=a(9242),s=a(3396);function i(e,t,a,i,o,l){const n=(0,s.up)("the-header"),c=(0,s.up)("router-view"),d=(0,s.up)("the-footer");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(n),(0,s.Wm)(c,null,{default:(0,s.w5)((({Component:e})=>[(0,s.Wm)(r.uT,{name:"route",mode:"out-in"},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)((0,s.LL)(e)))])),_:2},1024)])),_:1}),(0,s.Wm)(d)])}var o=a(65);const l={class:"header container"},n={class:"header__wrapper"},c=(0,s._)("span",{class:"header__info"},"Каталог",-1),d=(0,s._)("img",{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"},null,-1),u=(0,s._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1);function _(e,t,a,r,i,o){const _=(0,s.up)("router-link"),m=(0,s.up)("cart-logo");return(0,s.wg)(),(0,s.iD)("header",l,[(0,s._)("div",n,[c,(0,s.Wm)(_,{class:"header__logo",to:{name:"main"}},{default:(0,s.w5)((()=>[d])),_:1}),u,(0,s.Wm)(m)])])}var m=a(7139);const p=(0,s._)("svg",{width:"19",height:"24"},[(0,s._)("use",{"xlink:href":"#icon-cart"})],-1),g={key:0,class:"header__count","aria-label":"Количество товаров"},h={key:1,class:"header__count","aria-label":"Количество товаров"},f={key:2,class:"header__count","aria-label":"Количество товаров"};function y(e,t,a,r,i,o){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.j4)(l,{class:"header__cart","aria-label":"Корзина с товарами",to:{name:"cart"}},{default:(0,s.w5)((()=>[p,e.$store.state.isCartLoading?((0,s.wg)(),(0,s.iD)("span",g,"...")):e.$store.state.isCartLoadingFailed?((0,s.wg)(),(0,s.iD)("span",h,"!")):((0,s.wg)(),(0,s.iD)("span",f,(0,m.zw)(e.$store.state.cartData.length),1))])),_:1})}var b={},v=a(89);const w=(0,v.Z)(b,[["render",y]]);var k=w,I={components:{CartLogo:k}};const D=(0,v.Z)(I,[["render",_]]);var C=D;const F={class:"footer container"},P=(0,s.uE)('<div class="footer__wrapper"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@moire.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2022 Moire </span></div>',1),$=[P];function L(e,t){return(0,s.wg)(),(0,s.iD)("footer",F,$)}const z={},A=(0,v.Z)(z,[["render",L]]);var S=A,T={components:{TheHeader:C,TheFooter:S},created(){const e=localStorage.getItem("userAccessKey");e&&this.updateAccessKey(e),this.loadCart()},methods:{...(0,o.nv)(["loadCart"]),...(0,o.OI)(["updateAccessKey"])}};const V=(0,v.Z)(T,[["render",i]]);var x=V,U=a(678);const E={class:"content container"},M={class:"content__top"},K={class:"content__row"},O=(0,s._)("h1",{class:"content__title"},"Каталог",-1),W={class:"content__info"},j={class:"content__catalog"},q={class:"catalog"},Z={key:0,class:"loader-wrapper"},H={key:1},Y={key:2};function B(e,t,a,r,i,o){const l=(0,s.up)("products-filter"),n=(0,s.up)("base-loader"),c=(0,s.up)("products-list"),d=(0,s.up)("base-pagination");return(0,s.wg)(),(0,s.iD)("main",E,[(0,s._)("div",M,[(0,s._)("div",K,[O,(0,s._)("span",W," Количество товаров: "+(0,m.zw)(o.total),1)])]),(0,s._)("div",j,[(0,s.Wm)(l,{filters:i.filters,onChangeFilters:o.setFilters},null,8,["filters","onChangeFilters"]),(0,s._)("section",q,[o.isLoading?((0,s.wg)(),(0,s.iD)("div",Z,[(0,s.Wm)(n)])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("h2",H," Возникла ошибка при загрузке товаров. Попробуйте позже. ")):o.products.length?((0,s.wg)(),(0,s.j4)(c,{key:3,products:o.products},null,8,["products"])):((0,s.wg)(),(0,s.iD)("h2",Y," Нет товаров по вашему запросу. Попробуйте поискать что-нибудь другое! ")),o.products.length?((0,s.wg)(),(0,s.j4)(d,{key:4,page:i.page,perPage:i.productsPerPage,total:o.total,onChangePage:o.setPage},null,8,["page","perPage","total","onChangePage"])):(0,s.kq)("",!0)])])])}const Q={key:0,class:"filter"},R={class:"loader-wrapper"},G={key:1,class:"filter"},J=(0,s._)("h2",null," Произошла ошибка при загрузке фильтров! Попробуйте перезагрузить страницу. ",-1),N=[J],X={key:2,class:"filter"},ee={class:"form__block"},te=(0,s._)("legend",{class:"form__legend"},"Цена",-1),ae={class:"form__label form__label--price"},re=(0,s._)("span",{class:"form__value"},"От",-1),se={class:"form__label form__label--price"},ie=(0,s._)("span",{class:"form__value"},"До",-1),oe={class:"form__block"},le=(0,s._)("legend",{class:"form__legend"},"Категория",-1),ne={class:"form__label form__label--select"},ce=(0,s._)("option",{value:"0"},"Все категории",-1),de=["value"],ue={class:"form__block"},_e=(0,s._)("legend",{class:"form__legend"},"Цвет",-1),me={class:"colors colors--black"},pe={class:"colors__label"},ge=["value"],he={class:"form__block"},fe=(0,s._)("legend",{class:"form__legend"},"Материал",-1),ye={class:"check-list"},be={class:"check-list__label"},ve=["value"],we={class:"check-list__desc"},ke={class:"form__block"},Ie=(0,s._)("legend",{class:"form__legend"},"Коллекция",-1),De={class:"check-list"},Ce={class:"check-list__label"},Fe=["value"],Pe={class:"check-list__desc"},$e=(0,s._)("button",{class:"filter__submit button button--primery",type:"submit"}," Применить ",-1);function Le(e,t,a,i,o,l){const n=(0,s.up)("base-loader");return l.isLoading?((0,s.wg)(),(0,s.iD)("aside",Q,[(0,s._)("div",R,[(0,s.Wm)(n)])])):l.isLoadingFailed?((0,s.wg)(),(0,s.iD)("aside",G,N)):((0,s.wg)(),(0,s.iD)("aside",X,[(0,s._)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:t[7]||(t[7]=(0,r.iM)(((...e)=>l.setFilters&&l.setFilters(...e)),["prevent"]))},[(0,s._)("fieldset",ee,[te,(0,s._)("label",ae,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":t[0]||(t[0]=e=>o.currentPriceFrom=e)},null,512),[[r.nr,o.currentPriceFrom,void 0,{number:!0}]]),re]),(0,s._)("label",se,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":t[1]||(t[1]=e=>o.currentPriceTo=e)},null,512),[[r.nr,o.currentPriceTo,void 0,{number:!0}]]),ie])]),(0,s._)("fieldset",oe,[le,(0,s._)("label",ne,[(0,s.wy)((0,s._)("select",{class:"form__select",name:"category","onUpdate:modelValue":t[2]||(t[2]=e=>o.currentCategoryId=e)},[ce,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.categories,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.id},(0,m.zw)(e.title),9,de)))),128))],512),[[r.bM,o.currentCategoryId]])])]),(0,s._)("fieldset",ue,[_e,(0,s._)("ul",me,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.colors,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:e.id},[(0,s._)("label",pe,[(0,s.wy)((0,s._)("input",{class:"colors__radio sr-only",type:"checkbox",name:"color",value:e.id,"onUpdate:modelValue":t[3]||(t[3]=e=>o.currentColorId=e)},null,8,ge),[[r.e8,o.currentColorId]]),(0,s._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":e.code})},null,4)])])))),128))])]),(0,s._)("fieldset",he,[fe,(0,s._)("ul",ye,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.materials,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"check-list__item",key:e.id},[(0,s._)("label",be,[(0,s.wy)((0,s._)("input",{class:"check-list__check sr-only",type:"checkbox",name:"material",value:e.id,"onUpdate:modelValue":t[4]||(t[4]=e=>o.currentMaterialId=e)},null,8,ve),[[r.e8,o.currentMaterialId]]),(0,s._)("span",we,[(0,s.Uk)((0,m.zw)(e.title)+" ",1),(0,s._)("span",null,"("+(0,m.zw)(e.productsCount)+")",1)])])])))),128))])]),(0,s._)("fieldset",ke,[Ie,(0,s._)("ul",De,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.seasons,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"check-list__item",key:e.id},[(0,s._)("label",Ce,[(0,s.wy)((0,s._)("input",{class:"check-list__check sr-only",type:"checkbox",name:"collection",value:e.id,"onUpdate:modelValue":t[5]||(t[5]=e=>o.currentSeasonId=e)},null,8,Fe),[[r.e8,o.currentSeasonId]]),(0,s._)("span",Pe,[(0,s.Uk)((0,m.zw)(e.title)+" ",1),(0,s._)("span",null,"("+(0,m.zw)(e.productsCount)+")",1)])])])))),128))])]),$e,l.isResetBtnVisible?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"filter__reset button button--second",type:"button",onClick:t[6]||(t[6]=(...e)=>l.resetFilters&&l.resetFilters(...e))}," Сбросить ")):(0,s.kq)("",!0)],32)]))}var ze={emits:["change-filters"],props:["filters"],data(){return{currentPriceFrom:this.filters.filterPriceFrom,currentPriceTo:this.filters.filterPriceTo,currentCategoryId:this.filters.filterCategoryId,currentColorId:this.filters.filterColorId,currentMaterialId:this.filters.filterMaterialId,currentSeasonId:this.filters.filterSeasonId}},computed:{colors(){return this.$store.state.colorsData},materials(){return this.$store.state.materialsData},seasons(){return this.$store.state.seasonsData},categories(){return this.$store.state.categoriesData},productFilters(){return{filterPriceFrom:this.currentPriceFrom,filterPriceTo:this.currentPriceTo,filterCategoryId:this.currentCategoryId,filterColorId:this.currentColorId,filterMaterialId:this.currentMaterialId,filterSeasonId:this.currentSeasonId}},isLoading(){return this.$store.state.areFiltersLoading},isLoadingFailed(){return this.$store.state.areFiltersLoadingFailed},isResetBtnVisible(){return Object.values(this.filters).some((e=>void 0!==e.length?e.length:e))}},methods:{async loadFilters(){this.$store.dispatch("loadFilters")},setFilters(){this.$emit("change-filters",this.productFilters)},resetFilters(){this.currentPriceFrom=0,this.currentPriceTo=0,this.currentCategoryId=0,this.currentColorId=[],this.currentMaterialId=[],this.currentSeasonId=[],this.$router.replace({query:null}),this.setFilters()}},created(){this.$store.dispatch("loadFilters")}};const Ae=(0,v.Z)(ze,[["render",Le]]);var Se=Ae;const Te={class:"catalog__list"};function Ve(e,t,a,r,i,o){const l=(0,s.up)("products-item");return(0,s.wg)(),(0,s.iD)("ul",Te,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.products,(e=>((0,s.wg)(),(0,s.j4)(l,{key:e.id,id:e.id,title:e.title,price:e.price,colors:e.colors,images:e.images},null,8,["id","title","price","colors","images"])))),128))])}const xe={class:"catalog__item"},Ue=["src","alt"],Ee={key:1,src:"assets/no-image.jpg"},Me={class:"catalog__title"},Ke={class:"catalog__price"},Oe={class:"colors colors--black"},We=["onClick"],je=["name","value","checked"];function qe(e,t,a,i,o,l){const n=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("li",xe,[(0,s.Wm)(n,{class:"catalog__pic",to:{name:"product",params:{id:a.id}}},{default:(0,s.w5)((()=>[a.images[o.activeImgIdx]&&a.images[o.activeImgIdx].file?((0,s.wg)(),(0,s.iD)("img",{key:0,src:a.images[o.activeImgIdx].file.url,alt:a.title},null,8,Ue)):((0,s.wg)(),(0,s.iD)("img",Ee))])),_:1},8,["to"]),(0,s._)("h3",Me,[(0,s.Wm)(n,{to:{name:"product",params:{id:a.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(a.title),1)])),_:1},8,["to"])]),(0,s._)("span",Ke,(0,m.zw)(a.price)+" ₽ ",1),(0,s._)("ul",Oe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.colors,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:e.id},[(0,s._)("label",{class:"colors__label",onClick:(0,r.iM)((t=>l.changeImg(e.id)),["prevent"])},[(0,s._)("input",{class:"colors__radio sr-only",type:"radio",name:"color-"+a.id,value:e.color.code,checked:e.id===l.activeImgId},null,8,je),(0,s._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":e.color.code})},null,4)],8,We)])))),128))])])}var Ze={props:["id","title","price","colors","images"],data(){return{activeImgIdx:0}},computed:{activeImgId(){return this.colors[this.activeImgIdx].id}},methods:{changeImg(e){const t=this.colors.findIndex((t=>t.id===e));this.activeImgIdx=t}}};const He=(0,v.Z)(Ze,[["render",qe]]);var Ye=He,Be={components:{ProductsItem:Ye},props:["products"]};const Qe=(0,v.Z)(Be,[["render",Ve]]);var Re=Qe;const Ge={class:"catalog__pagination pagination"},Je={class:"pagination__item"},Ne=(0,s._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-arrow-left"})],-1),Xe=[Ne],et=["onClick"],tt={class:"pagination__item"},at=(0,s._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-arrow-right"})],-1),rt=[at];function st(e,t,a,r,i,o){return(0,s.wg)(),(0,s.iD)("ul",Ge,[(0,s._)("li",Je,[(0,s._)("a",{class:(0,m.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1===a.page}]),"aria-label":"Предыдущая страница",onClick:t[0]||(t[0]=e=>o.paginate(a.page-1))},Xe,2)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pagesTotal,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"pagination__item",key:e},[(0,s._)("a",{class:(0,m.C_)(["pagination__link",{"pagination__link--current":a.page===e}]),onClick:t=>o.paginate(e)},(0,m.zw)(e),11,et)])))),128)),(0,s._)("li",tt,[(0,s._)("a",{class:(0,m.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":a.page===o.pagesTotal}]),href:"#","aria-label":"Следующая страница",onClick:t[1]||(t[1]=e=>o.paginate(a.page+1))},rt,2)])])}var it={emits:["changePage"],props:["page","perPage","total"],computed:{pagesTotal(){return Math.ceil(this.total/this.perPage)}},methods:{paginate(e){e>0&&e<=this.pagesTotal&&this.$emit("changePage",e)}}};const ot=(0,v.Z)(it,[["render",st]]);var lt=ot,nt={components:{ProductsFilter:Se,ProductsList:Re,BasePagination:lt},data(){return{page:1,productsPerPage:12,filters:{filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColorId:[],filterMaterialId:[],filterSeasonId:[]}}},computed:{productsData(){return this.$store.state.productsData},products(){return this.productsData?this.productsData.items.map((e=>({...e,images:e.colors.flatMap((e=>e.gallery||[])).filter((e=>null!==e))}))):[]},total(){return this.productsData?this.productsData.pagination.total:0},isLoading(){return this.$store.state.isLoading},isLoadingFailed(){return this.$store.state.isLoadingFailed}},methods:{loadProducts(){this.$store.dispatch("loadProducts",{page:this.page,limit:this.productsPerPage,minPrice:this.filters.filterPriceFrom,maxPrice:this.filters.filterPriceTo,categoryId:this.filters.filterCategoryId,materialIds:this.filters.filterMaterialId,seasonIds:this.filters.filterSeasonId,colorIds:this.filters.filterColorId})},setFilters(e){this.filters=e},setPage(e){this.page=e}},watch:{filters(){this.page=1,this.loadProducts()},page(){this.loadProducts()},$route(){this.loadProducts()}},created(){this.filters.filterCategoryId=this.$route.query.categoryId||0,this.loadProducts()}};const ct=(0,v.Z)(nt,[["render",B]]);var dt=ct;const ut={key:0,class:"content container"},_t={class:"loader-wrapper"},mt={key:1,class:"content container"},pt=(0,s._)("h1",null,"Произошла ошибка при загрузке корзины. Попробуйте ещё раз!",-1),gt=[pt],ht={key:2,class:"content container"},ft={class:"content__top"},yt={class:"breadcrumbs"},bt={class:"breadcrumbs__item"},vt=(0,s.Uk)(" Каталог "),wt=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Корзина ")],-1),kt={class:"content__row"},It=(0,s._)("h1",{class:"content__title"},"Корзина",-1),Dt={class:"content__info"},Ct={class:"cart"},Ft={class:"cart__form form",action:"#",method:"POST"},Pt={class:"cart__field"},$t={class:"cart__list"},Lt={class:"cart__block"},zt=(0,s._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),At={class:"cart__price"},St=(0,s.Uk)(" Итого: "),Tt=(0,s.Uk)(" Оформить заказ ");function Vt(e,t,a,r,i,o){const l=(0,s.up)("base-loader"),n=(0,s.up)("router-link"),c=(0,s.up)("cart-item");return o.isLoading?((0,s.wg)(),(0,s.iD)("main",ut,[(0,s._)("div",_t,[(0,s.Wm)(l)])])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("main",mt,gt)):((0,s.wg)(),(0,s.iD)("main",ht,[(0,s._)("div",ft,[(0,s._)("ul",yt,[(0,s._)("li",bt,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[vt])),_:1})]),wt]),(0,s._)("div",kt,[It,(0,s._)("span",Dt," Количество товаров: "+(0,m.zw)(o.totalQuantity),1)])]),(0,s._)("section",Ct,[(0,s._)("form",Ft,[(0,s._)("div",Pt,[(0,s._)("ul",$t,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cart,(e=>((0,s.wg)(),(0,s.j4)(c,{key:e.id,size:e.size.title,title:e.product.title,img:e.color.gallery[0].file.url,"basket-item-id":e.id,"item-id":e.product.id,"color-code":e.color.color.code,"color-title":e.color.color.title,price:e.product.price,amount:e.quantity},null,8,["size","title","img","basket-item-id","item-id","color-code","color-title","price","amount"])))),128))])]),(0,s._)("div",Lt,[zt,(0,s._)("p",At,[St,(0,s._)("span",null,(0,m.zw)(o.totalPrice)+" ₽",1)]),o.cart.length?((0,s.wg)(),(0,s.j4)(n,{key:0,class:"cart__button button button--primery",type:"submit",to:{name:"order"}},{default:(0,s.w5)((()=>[Tt])),_:1})):(0,s.kq)("",!0)])])])]))}const xt={class:"cart__item product"},Ut={class:"product__pic"},Et=["src","alt"],Mt={class:"product__title"},Kt={class:"product__info product__info--color"},Ot=(0,s.Uk)(" Цвет: "),Wt=(0,s._)("br",null,null,-1),jt=(0,s._)("br",null,null,-1),qt={class:"product__code"},Zt={class:"product__price"},Ht={class:"product__status"},Yt={key:0,class:"product__error"},Bt=(0,s._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-close"})],-1),Qt=[Bt];function Rt(e,t,a,i,o,l){const n=(0,s.up)("base-item-counter");return(0,s.wg)(),(0,s.iD)("li",xt,[(0,s._)("div",Ut,[(0,s._)("img",{src:null!==a.img?a.img:"assets/no-image.jpg",width:"120",height:"120",alt:a.title},null,8,Et)]),(0,s._)("h3",Mt,(0,m.zw)(a.title),1),(0,s._)("p",Kt,[Ot,(0,s._)("span",null,[(0,s._)("i",{style:(0,m.j5)({"background-color":a.colorCode})},null,4),(0,s.Uk)(" "+(0,m.zw)(a.colorTitle),1)]),Wt,jt,(0,s.Uk)(" Размер: "+(0,m.zw)(a.size),1)]),(0,s._)("span",qt," Артикул: "+(0,m.zw)(a.itemId),1),(0,s.Wm)(n,{modelValue:l.productAmount,"onUpdate:modelValue":t[0]||(t[0]=e=>l.productAmount=e),itemAmount:a.amount,onChangeItemAmount:l.setItemAmount},null,8,["modelValue","itemAmount","onChangeItemAmount"]),(0,s._)("b",Zt,(0,m.zw)(a.price*l.productAmount)+" ₽ ",1),(0,s._)("div",Ht,[o.isSendingFailed?((0,s.wg)(),(0,s.iD)("span",Yt,"Что-то пошло не так. Попробуйте позже!")):(0,s.kq)("",!0)]),(0,s._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:t[1]||(t[1]=(0,r.iM)(((...e)=>l.deleteItem&&l.deleteItem(...e)),["prevent"]))},Qt)])}var Gt=a(6265),Jt=a.n(Gt);const Nt="https://vue-moire.skillbox.cc/api",Xt=["disabled"],ea=(0,s._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-minus"})],-1),ta=[ea],aa=(0,s._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-plus"})],-1),ra=[aa];function sa(e,t,a,i,o,l){return(0,s.wg)(),(0,s.iD)("div",{class:(0,m.C_)(["form__counter",{product__counter:"cart"===e.$route.name}])},[(0,s._)("button",{type:"button","aria-label":"Убрать один товар",disabled:1===a.itemAmount,onClick:t[0]||(t[0]=e=>l.changeItemAmount(a.itemAmount-1))},ta,8,Xt),(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.itemAmountVal=e),name:"count"},null,512),[[r.nr,l.itemAmountVal,void 0,{number:!0}]]),(0,s._)("button",{type:"button","aria-label":"Добавить один товар",onClick:t[2]||(t[2]=e=>l.changeItemAmount(a.itemAmount+1))},ra)],2)}var ia={props:["itemAmount"],emits:["changeItemAmount"],computed:{itemAmountVal:{get(){return this.itemAmount},set(e){e&&this.$emit("changeItemAmount",e)}}},methods:{changeItemAmount(e){e>=1&&this.$emit("changeItemAmount",e)}}};const oa=(0,v.Z)(ia,[["render",sa]]);var la=oa,na={components:{BaseItemCounter:la},props:["title","img","basketItemId","itemId","colorCode","colorTitle","price","amount","size"],data(){return{isSending:!1,isSendingFailed:!1}},computed:{productAmount:{get(){return this.amount},async set(e){this.isSendingFailed=!1,this.$store.commit("updateCartProductQuantity",{productId:this.itemId,quantity:e});try{const{data:t}=await Jt().put(`${Nt}/baskets/products`,{basketItemId:this.basketItemId,quantity:e},{params:{userAccessKey:this.$store.state.userAccessKey}});this.$store.commit("updateCart",t.items)}catch(t){this.isSendingFailed=!0,this.$store.commit("syncCartProducts")}}}},methods:{setItemAmount(e){this.productAmount=e},deleteItem(){this.$store.dispatch("deleteFromCart",{basketItemId:this.basketItemId,productId:this.itemId})}}};const ca=(0,v.Z)(na,[["render",Rt]]);var da=ca,ua={components:{CartItem:da},computed:{isLoading(){return this.$store.state.isCartLoading},isLoadingFailed(){return this.$store.state.isCartLoadingFailed},cart(){return this.$store.getters.cartProductsData},totalPrice(){return this.$store.getters.cartTotalPrice},totalQuantity(){return this.$store.getters.cartTotalQuantity},error(){return this.$store.state.cartError}}};const _a=(0,v.Z)(ua,[["render",Vt]]);var ma=_a;const pa={key:0,class:"content container"},ga={class:"loader-wrapper"},ha={key:1,class:"content container"},fa=(0,s._)("h1",null," Произошла ошибка при загрузке товара. Пожалуйста, попробуйте зайти сюда позже. ",-1),ya=[fa],ba={key:2,class:"content container"},va={class:"content__top"},wa={class:"breadcrumbs"},ka={class:"breadcrumbs__item"},Ia=(0,s.Uk)(" Каталог "),Da={class:"breadcrumbs__item"},Ca={class:"breadcrumbs__item"},Fa={class:"breadcrumbs__link"},Pa={class:"item"},$a={class:"item__pics pics"},La={class:"pics__wrapper"},za=["src","alt"],Aa={class:"pics__list"},Sa=["onClick"],Ta=["src","alt"],Va={class:"item__info"},xa={class:"item__code"},Ua={class:"item__title"},Ea={class:"item__form"},Ma={class:"form",action:"#",method:"POST"},Ka={class:"item__row item__row--center"},Oa={class:"item__price"},Wa={class:"item__row"},ja={class:"form__block"},qa=(0,s._)("legend",{class:"form__legend"},"Цвет",-1),Za={class:"colors colors--black"},Ha={class:"colors__label"},Ya=["value","checked"],Ba={class:"form__block"},Qa=(0,s._)("legend",{class:"form__legend"},"Размер",-1),Ra={class:"form__label form__label--small form__label--select"},Ga=["value"],Ja=["disabled"],Na={key:0},Xa={key:1},er={key:2},tr={class:"item__desc"},ar={class:"tabs"},rr={class:"tabs__item"},sr={class:"tabs__item"};function ir(e,t,a,i,o,l){const n=(0,s.up)("base-loader"),c=(0,s.up)("router-link"),d=(0,s.up)("base-item-counter");return o.isLoading?((0,s.wg)(),(0,s.iD)("main",pa,[(0,s._)("div",ga,[(0,s.Wm)(n)])])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("main",ha,ya)):((0,s.wg)(),(0,s.iD)("main",ba,[(0,s._)("div",va,[(0,s._)("ul",wa,[(0,s._)("li",ka,[(0,s.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[Ia])),_:1})]),(0,s._)("li",Da,[(0,s.Wm)(c,{class:"breadcrumbs__link",to:{name:"main",query:{categoryId:l.product.category.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(l.product.category.title),1)])),_:1},8,["to"])]),(0,s._)("li",Ca,[(0,s._)("a",Fa,(0,m.zw)(l.product.title),1)])])]),(0,s._)("section",Pa,[(0,s._)("div",$a,[(0,s._)("div",La,[(0,s._)("img",{width:"570",height:"570",src:l.gallery[o.activeColorIdx].image,alt:l.product.title},null,8,za)]),(0,s._)("ul",Aa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.gallery,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"pics__item",key:e.id},[(0,s._)("a",{href:"",class:(0,m.C_)(["pics__link",{"pics__link--current":e.id===l.activeColorId}]),onClick:(0,r.iM)((t=>l.changeImg(e.id)),["prevent"])},[(0,s._)("img",{width:"98",height:"98",src:e.image,alt:l.product.title},null,8,Ta)],10,Sa)])))),128))])]),(0,s._)("div",Va,[(0,s._)("span",xa,"Артикул: "+(0,m.zw)(l.product.id),1),(0,s._)("h2",Ua,(0,m.zw)(l.product.title),1),(0,s._)("div",Ea,[(0,s._)("form",Ma,[(0,s._)("div",Ka,[(0,s.Wm)(d,{modelValue:o.productAmount,"onUpdate:modelValue":t[0]||(t[0]=e=>o.productAmount=e),itemAmount:o.productAmount,onChangeItemAmount:l.setItemAmount},null,8,["modelValue","itemAmount","onChangeItemAmount"]),(0,s._)("b",Oa,(0,m.zw)(l.product.price)+" ₽ ",1)]),(0,s._)("div",Wa,[(0,s._)("fieldset",ja,[qa,(0,s._)("ul",Za,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.product.colors,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:e.id},[(0,s._)("label",Ha,[(0,s.wy)((0,s._)("input",{class:"colors__radio sr-only",type:"radio",name:"color",value:e.color.id,checked:l.activeColorId===e.color.id,"onUpdate:modelValue":t[1]||(t[1]=e=>l.activeColorId=e)},null,8,Ya),[[r.G2,l.activeColorId]]),(0,s._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":e.color.code})},null,4)])])))),128))])]),(0,s._)("fieldset",Ba,[Qa,(0,s._)("label",Ra,[(0,s.wy)((0,s._)("select",{class:"form__select",name:"category","onUpdate:modelValue":t[2]||(t[2]=e=>l.activeSizeId=e)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.product.sizes,(e=>((0,s.wg)(),(0,s.iD)("option",{value:e.id,key:e.id},(0,m.zw)(e.title),9,Ga)))),128))],512),[[r.bM,l.activeSizeId]])])])]),(0,s._)("button",{class:"item__button button button--primery",type:"submit",disabled:o.isSending,onClick:t[3]||(t[3]=(0,r.iM)(((...e)=>l.addToCart&&l.addToCart(...e)),["prevent"]))}," В корзину ",8,Ja),o.isSending?((0,s.wg)(),(0,s.iD)("p",Na,"Добавляем товар в корзину...")):(0,s.kq)("",!0),o.isSendingFailed?((0,s.wg)(),(0,s.iD)("p",Xa," Произошла ошибка при добавлении товара в корзину. Попробуйте ещё раз! ")):o.isAdded?((0,s.wg)(),(0,s.iD)("p",er,"Товар успешно добавлен в корзину!")):(0,s.kq)("",!0)])])]),(0,s._)("div",tr,[(0,s._)("ul",ar,[(0,s._)("li",rr,[(0,s._)("a",{class:(0,m.C_)(["tabs__link",{"tabs__link--current":"base-item-content"===o.selectedTab}]),onClick:t[4]||(t[4]=e=>l.setSelectedComponent("base-item-content"))}," Информация о товаре ",2)]),(0,s._)("li",sr,[(0,s._)("a",{class:(0,m.C_)(["tabs__link",{"tabs__link--current":"base-item-delivery"===o.selectedTab}]),onClick:t[5]||(t[5]=e=>l.setSelectedComponent("base-item-delivery"))}," Доставка и возврат ",2)])]),((0,s.wg)(),(0,s.j4)((0,s.LL)(o.selectedTab)))])])]))}const or={class:"item__content"},lr=(0,s.uE)("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),nr=[lr];function cr(e,t){return(0,s.wg)(),(0,s.iD)("div",or,nr)}const dr={},ur=(0,v.Z)(dr,[["render",cr]]);var _r=ur;const mr={class:"item__content"},pr=(0,s.uE)("<h3>Оплата товара:</h3><p> Оплата возможно несколькими способами. При замере покупатель может внести часть суммы заказа, но не менее 70%. Оставшуюся часть вносят после монтажа Вашего изделия. Оплата производится наличным платежом. Другой вариант: перечислением по безналичному расчету всей суммы заказа банковским переводом или банковской картой по номеру заказа у нас на сайте. </p><h3>Доставка и Приемка товара:</h3><p> Мы осуществляем доставку товара собственной службой доставки в согласованное с Вами время. Период доставки с 10.00 до 19.00. Доставка в праздничные и выходные дни согласовывается с менеджером вашего заказа.<br> При приемке товара необходимо в присутствии водителя-экспедитора (монтажника):<br> Совершить все необходимые действия, обеспечивающие принятие товаров - принятые покупателем (получателем) товары должны быть им осмотрены, проверены количество и качество.<br> После совершения указанных действий Покупатель (получатель) либо расписывается в графе: &quot;Заказ принял, комплектность полная, услуги по доставке оказаны, претензий к количеству и внешнему виду товара не имею. С условиями возврата товара ознакомлен&quot;. После получения заказа претензии к внешним дефектам товара, его количеству, комплектности и товарному виду не принимаются, либо составляет акт о выявленных недостатках в двух экземплярах. Ставя свою подпись, Покупатель (получатель) подтверждает, что он является уполномоченным на получение товара лицом.<br> В случае если товар привезен не в полном объеме, присутствует пересорт, бой или брак, довоз товара производится за счет продавца в согласованный сторонами срок при наличии товара на складе или в срок 2-3 рабочих дня после поступления заказного товара на склад, в случае его отсутствия.<br></p><h3>Условия возврата товара надлежащего качества:</h3><p> Возврат товара надлежащего качества, приобретённого через наш интернет-магазин, возможен в случае, если он не был в употреблении, имеются заводские ярлыки, бирки и т.п., сохранены его товарный вид, потребительские свойства, а также документ, подтверждающий факт и условия покупки указанного товара.<br> Не подлежат возврату товары, входящие в перечень непродовольственных товаров надлежащего качества, не подходящих возврату или обмену на аналогичный товар других размера, формы, габарита, фасона, расцветки или комплектации.<br> Покупатель вправе отказаться от товара, приобретенного через наш интернет-магазин, после его передачи в течение 7 дней (согласно Закону РФ &quot;О защите прав потребителей&quot;, статьи 26.1 о Дистанционном способе продаже товаров).<br> Для возврата товара необходим документ, удостоверяющий личность (паспорт гражданина РФ/загранпаспорт, временное удостоверение личности гражданина РФ, выдаваемое на период оформления паспорта).<br></p>",6),gr=[pr];function hr(e,t){return(0,s.wg)(),(0,s.iD)("div",mr,gr)}const fr={},yr=(0,v.Z)(fr,[["render",hr]]);var br=yr,vr={components:{BaseItemCounter:la,BaseItemContent:_r,BaseItemDelivery:br},data(){return{productAmount:1,isLoading:!1,isLoadingFailed:!1,isSending:!1,isSendingFailed:!1,isAdded:!1,productData:null,activeColorIdx:0,activeSizeIdx:0,selectedTab:"base-item-content"}},computed:{product(){return{...this.productData,gallery:this.productData.colors.map((e=>({id:e.color.id,image:e.gallery?e.gallery[0].file.url:"assets/no-image.jpg"})))}},gallery(){return this.product.gallery},activeColorId:{get(){return this.gallery[this.activeColorIdx].id},set(e){const t=this.gallery.findIndex((t=>t.id===e));this.activeColorIdx=t}},activeSizeId:{get(){return this.product.sizes[this.activeSizeIdx].id},set(e){const t=this.product.sizes.findIndex((t=>t.id===e));this.activeSizeIdx=t}}},methods:{async loadProduct(){this.isLoading=!0,this.isLoadingFailed=!1;try{const{data:e}=await Jt().get(`${Nt}/products/${this.$route.params.id}`);this.productData=e}catch(e){this.isLoading=!1,this.isLoadingFailed=!0}this.isLoading=!1},setItemAmount(e){this.productAmount=e},changeImg(e){const t=this.gallery.findIndex((t=>t.id===e));this.activeColorIdx=t},async addToCart(){this.isSending=!0,this.isAdded=!1,this.isSendingFailed=!1;try{await this.$store.dispatch("addToCart",{productId:this.product.id,colorId:this.activeColorId,sizeId:this.activeSizeId,quantity:this.productAmount})}catch(e){this.isSendingFailed=!0}this.isSending=!1,this.isAdded=!0},setSelectedComponent(e){this.selectedTab=e}},created(){this.loadProduct()}};const wr=(0,v.Z)(vr,[["render",ir]]);var kr=wr;const Ir={class:"content container"},Dr={class:"content__top"},Cr={class:"breadcrumbs"},Fr={class:"breadcrumbs__item"},Pr=(0,s.Uk)(" Каталог "),$r={class:"breadcrumbs__item"},Lr=(0,s.Uk)(" Корзина "),zr=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),Ar=(0,s._)("div",{class:"content__row"},[(0,s._)("h1",{class:"content__title"},"Оформление заказа")],-1),Sr={class:"cart"},Tr={key:0,class:"loader-wrapper"},Vr={key:1,class:"cart__field"},xr={class:"cart__data"},Ur={key:0,class:"cart__options"},Er={class:"loader-wrapper"},Mr={key:1,class:"cart__options"},Kr=(0,s._)("h2",null,"Возникла ошибка при загрузке товаров. Попробуйте позже.",-1),Or=[Kr],Wr={key:2,class:"cart__options"},jr=(0,s._)("h3",{class:"cart__title"},"Доставка",-1),qr={class:"cart__options options"},Zr={key:0,class:"form__error"},Hr=(0,s._)("h3",{class:"cart__title"},"Оплата",-1),Yr={class:"cart__options options"},Br={key:1,class:"form__error"},Qr={class:"cart__block"},Rr={class:"cart__orders"},Gr={class:"cart__total"},Jr=(0,s.Uk)(" Доставка: "),Nr=(0,s.Uk)(" Итого: "),Xr=(0,s.Uk)(" товара на сумму "),es=["disabled"],ts={key:2,class:"cart__error form__error-block"},as=(0,s._)("h4",null,"Заявка не отправлена!",-1);function rs(e,t,a,i,o,l){const n=(0,s.up)("router-link"),c=(0,s.up)("base-loader"),d=(0,s.up)("base-form-text-field"),u=(0,s.up)("base-form-textarea"),_=(0,s.up)("base-form-radio-delivery"),p=(0,s.up)("base-form-radio-payment");return(0,s.wg)(),(0,s.iD)("main",Ir,[(0,s._)("div",Dr,[(0,s._)("ul",Cr,[(0,s._)("li",Fr,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[Pr])),_:1})]),(0,s._)("li",$r,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,s.w5)((()=>[Lr])),_:1})]),zr]),Ar]),(0,s._)("section",Sr,[(0,s._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:t[7]||(t[7]=(0,r.iM)(((...e)=>l.sendOrder&&l.sendOrder(...e)),["prevent"]))},[l.isSending?((0,s.wg)(),(0,s.iD)("div",Tr,[(0,s.Wm)(c)])):((0,s.wg)(),(0,s.iD)("div",Vr,[(0,s._)("div",xr,[(0,s.Wm)(d,{title:"ФИО",placeholder:"Введите ваше имя",error:l.formError.name,modelValue:o.formData.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.name=e)},null,8,["error","modelValue"]),(0,s.Wm)(d,{title:"Адрес доставки",placeholder:"Введите ваш адрес",error:l.formError.address,modelValue:o.formData.address,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.address=e)},null,8,["error","modelValue"]),(0,s.Wm)(d,{title:"Телефон",placeholder:"Введите ваш телефон",error:l.formError.phone,modelValue:o.formData.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.phone=e)},null,8,["error","modelValue"]),(0,s.Wm)(d,{title:"Email",placeholder:"Введите ваш Email",error:l.formError.email,modelValue:o.formData.email,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.email=e)},null,8,["error","modelValue"]),(0,s.Wm)(u,{title:"Комментарии к заказу",placeholder:"Ваши пожелания",error:l.formError.comments,modelValue:o.formData.comments,"onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.comments=e)},null,8,["error","modelValue"])]),l.isLoading?((0,s.wg)(),(0,s.iD)("div",Ur,[(0,s._)("div",Er,[(0,s.Wm)(c)])])):l.isLoadingFailed?((0,s.wg)(),(0,s.iD)("div",Mr,Or)):((0,s.wg)(),(0,s.iD)("div",Wr,[jr,(0,s._)("ul",qr,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(e=>((0,s.wg)(),(0,s.j4)(_,{key:e.id,group:"delivery",value:e.id,title:e.title,price:e.price,modelValue:o.formData.deliveryId,"onUpdate:modelValue":t[5]||(t[5]=e=>o.formData.deliveryId=e)},null,8,["value","title","price","modelValue"])))),128))]),l.formError.deliveryTypeId?((0,s.wg)(),(0,s.iD)("span",Zr,(0,m.zw)(l.formError.deliveryTypeId),1)):(0,s.kq)("",!0),Hr,(0,s._)("ul",Yr,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.payments,(e=>((0,s.wg)(),(0,s.j4)(p,{key:e.id,group:"pay",title:e.title,value:e.id,modelValue:o.formData.paymentId,"onUpdate:modelValue":t[6]||(t[6]=e=>o.formData.paymentId=e)},null,8,["title","value","modelValue"])))),128))]),l.formError.paymentTypeId?((0,s.wg)(),(0,s.iD)("span",Br,(0,m.zw)(l.formError.paymentTypeId),1)):(0,s.kq)("",!0)]))])),(0,s._)("div",Qr,[(0,s._)("ul",Rr,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cart,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"cart__order",key:e.id},[(0,s._)("h3",null,(0,m.zw)(e.product.title),1),(0,s._)("b",null,(0,m.zw)(e.product.price)+" ₽",1),(0,s._)("span",null,"Артикул: "+(0,m.zw)(e.product.id),1)])))),128))]),(0,s._)("div",Gr,[(0,s._)("p",null,[Jr,(0,s._)("b",null,(0,m.zw)(l.deliveryPrice?`${l.deliveryPrice} ₽`:"бесплатно"),1)]),(0,s._)("p",null,[Nr,(0,s._)("b",null,(0,m.zw)(l.totalQuantity),1),Xr,(0,s._)("b",null,(0,m.zw)(l.totalPrice)+" ₽",1)])]),(0,s._)("button",{class:"cart__button button button--primery",type:"submit",disabled:l.isLoading||l.isLoadingFailed}," Оформить заказ ",8,es)]),l.orderErrorMessage?((0,s.wg)(),(0,s.iD)("div",ts,[as,(0,s._)("p",null,(0,m.zw)(l.orderErrorMessage||"Похоже произошла ошибка. Попробуйте отправить снова или перезагрузите страницу."),1)])):(0,s.kq)("",!0)],32)])])}const ss=["placeholder"];function is(e,t,a,i,o,l){const n=(0,s.up)("base-form-field");return(0,s.wg)(),(0,s.j4)(n,{title:e.title,error:e.error},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text",name:"name",placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t)},null,8,ss),[[r.nr,e.value]])])),_:1},8,["title","error"])}const os={class:"form__label"},ls={class:"form__value"},ns={key:0,class:"form__error"};function cs(e,t,a,r,i,o){return(0,s.wg)(),(0,s.iD)("label",os,[(0,s.WI)(e.$slots,"default"),(0,s._)("span",ls,(0,m.zw)(a.title),1),a.error?((0,s.wg)(),(0,s.iD)("span",ns,(0,m.zw)(a.error),1)):(0,s.kq)("",!0)])}var ds={props:["title","error"]};const us=(0,v.Z)(ds,[["render",cs]]);var _s=us,ms={components:{BaseFormField:_s},emits:["update:modelValue"],props:["title","error","placeholder","modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},ps={mixins:[ms]};const gs=(0,v.Z)(ps,[["render",is]]);var hs=gs;const fs=["placeholder"];function ys(e,t,a,i,o,l){const n=(0,s.up)("base-form-field");return(0,s.wg)(),(0,s.j4)(n,{title:e.title,error:e.error},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("textarea",{class:"form__input form__input--area",name:"comments",placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t)},null,8,fs),[[r.nr,e.value]])])),_:1},8,["title","error"])}var bs={mixins:[ms]};const vs=(0,v.Z)(bs,[["render",ys]]);var ws=vs;const ks={class:"options__value"};function Is(e,t,a,r,i,o){const l=(0,s.up)("base-form-radio");return(0,s.wg)(),(0,s.j4)(l,{group:a.group},{default:(0,s.w5)((()=>[(0,s._)("span",ks,[(0,s.Uk)((0,m.zw)(a.title)+" ",1),(0,s._)("b",null,(0,m.zw)(+a.price?`${a.price} ₽`:"бесплатно"),1)])])),_:1},8,["group"])}const Ds={class:"options__item"},Cs={class:"options__label"},Fs=["name","value"];function Ps(e,t,a,i,o,l){return(0,s.wg)(),(0,s.iD)("li",Ds,[(0,s._)("label",Cs,[(0,s.wy)((0,s._)("input",{class:"options__radio sr-only",type:"radio",name:e.group,value:e.value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dataValue=t)},null,8,Fs),[[r.G2,e.dataValue]]),(0,s.WI)(e.$slots,"default")])])}var $s={emits:["update:modelValue"],props:["modelValue","value","group","error"],computed:{dataValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},Ls={mixins:[$s]};const zs=(0,v.Z)(Ls,[["render",Ps]]);var As=zs,Ss={components:{BaseFormRadio:As},props:["title","price","group"]};const Ts=(0,v.Z)(Ss,[["render",Is]]);var Vs=Ts;const xs={class:"options__value"};function Us(e,t,a,r,i,o){const l=(0,s.up)("base-form-radio");return(0,s.wg)(),(0,s.j4)(l,{group:a.group},{default:(0,s.w5)((()=>[(0,s._)("span",xs,(0,m.zw)(a.title),1)])),_:1},8,["group"])}var Es={components:{BaseFormRadio:As},props:["title","group"]};const Ms=(0,v.Z)(Es,[["render",Us]]);var Ks=Ms,Os={components:{BaseFormTextField:hs,BaseFormTextarea:ws,BaseFormRadioDelivery:Vs,BaseFormRadioPayment:Ks},data(){return{formData:{name:null,address:null,phone:null,email:null,comments:null,paymentId:1,deliveryId:1}}},computed:{cart(){return this.$store.state.cartProductsData},totalPrice(){return this.$store.getters.cartTotalPrice+this.deliveryPrice},totalQuantity(){return this.$store.getters.cartTotalQuantity},payments(){return this.$store.state.paymentsData},deliveries(){return this.$store.state.deliveriesData},deliveryPrice(){return this.deliveries?+this.deliveries.find((e=>e.id===this.formData.deliveryId)).price:0},formError(){return this.$store.state.orderErrorInfo||{}},formErrorMessage(){return this.$store.state.formErrorMessage},orderErrorMessage(){return this.$store.state.orderErrorMessage},isSending(){return this.$store.state.isSending},isSendingFailed(){return this.$store.state.isSendingFailed},isLoading(){return this.$store.state.isLoading},isLoadingFailed(){return this.$store.state.isLoadingFailed}},methods:{sendOrder(){this.$store.dispatch("sendOrder",{name:this.formData.name,address:this.formData.address,phone:this.formData.phone,email:this.formData.email,deliveryTypeId:this.formData.deliveryId,paymentTypeId:this.formData.paymentId,comments:this.formData.comments})},loadPayments(){this.$store.dispatch("loadPayments",{deliveryTypeId:this.formData.deliveryId})}},watch:{"formData.deliveryId"(){this.loadPayments(),this.formData.paymentId=null}},created(){this.$store.dispatch("loadDeliveries"),this.loadPayments()}};const Ws=(0,v.Z)(Os,[["render",rs]]);var js=Ws;const qs={key:0,class:"content container"},Zs={class:"loader-wrapper"},Hs={key:1,class:"content container"},Ys=(0,s._)("h1",null,"Произошла ошибка при загрузке корзины. Попробуйте ещё раз!",-1),Bs=[Ys],Qs={key:2,class:"content container"},Rs={class:"content__top"},Gs={class:"breadcrumbs"},Js={class:"breadcrumbs__item"},Ns=(0,s.Uk)(" Каталог "),Xs=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link",to:{name:"cart"}}," Корзина ")],-1),ei=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),ti={class:"content__title"},ai=(0,s.Uk)(" Заказ оформлен "),ri={class:"cart"},si={class:"cart__form form",action:"#",method:"POST"},ii={class:"cart__field"},oi=(0,s._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),li={class:"dictionary"},ni={class:"dictionary__item"},ci=(0,s._)("span",{class:"dictionary__key"}," Получатель ",-1),di={class:"dictionary__value"},ui={class:"dictionary__item"},_i=(0,s._)("span",{class:"dictionary__key"}," Адрес доставки ",-1),mi={class:"dictionary__value"},pi={class:"dictionary__item"},gi=(0,s._)("span",{class:"dictionary__key"}," Телефон ",-1),hi={class:"dictionary__value"},fi={class:"dictionary__item"},yi=(0,s._)("span",{class:"dictionary__key"}," Email ",-1),bi={class:"dictionary__value"},vi={class:"dictionary__item"},wi=(0,s._)("span",{class:"dictionary__key"}," Способ оплаты ",-1),ki={class:"dictionary__value"},Ii={class:"cart__block"},Di={class:"cart__orders"},Ci={class:"cart__total"},Fi=(0,s.Uk)(" Доставка: "),Pi=(0,s.Uk)(" Итого: "),$i=(0,s.Uk)(" товара на сумму ");function Li(e,t,a,r,i,o){const l=(0,s.up)("base-loader"),n=(0,s.up)("router-link");return o.isLoading?((0,s.wg)(),(0,s.iD)("main",qs,[(0,s._)("div",Zs,[(0,s.Wm)(l)])])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("main",Hs,Bs)):((0,s.wg)(),(0,s.iD)("main",Qs,[(0,s._)("div",Rs,[(0,s._)("ul",Gs,[(0,s._)("li",Js,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[Ns])),_:1})]),Xs,ei]),(0,s._)("h1",ti,[ai,(0,s._)("span",null,"№ "+(0,m.zw)(o.orderInfo.id),1)])]),(0,s._)("section",ri,[(0,s._)("form",si,[(0,s._)("div",ii,[oi,(0,s._)("ul",li,[(0,s._)("li",ni,[ci,(0,s._)("span",di,(0,m.zw)(o.orderInfo.name),1)]),(0,s._)("li",ui,[_i,(0,s._)("span",mi,(0,m.zw)(o.orderInfo.address),1)]),(0,s._)("li",pi,[gi,(0,s._)("span",hi,(0,m.zw)(o.orderInfo.phone),1)]),(0,s._)("li",fi,[yi,(0,s._)("span",bi,(0,m.zw)(o.orderInfo.email),1)]),(0,s._)("li",vi,[wi,(0,s._)("span",ki,(0,m.zw)(o.orderInfo.paymentType),1)])])]),(0,s._)("div",Ii,[(0,s._)("ul",Di,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.orderInfo.basket.items,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"cart__order",key:e.id},[(0,s._)("h3",null,(0,m.zw)(e.product.title),1),(0,s._)("b",null,(0,m.zw)(e.product.price)+" ₽",1),(0,s._)("span",null,"Артикул: "+(0,m.zw)(e.product.id),1)])))),128))]),(0,s._)("div",Ci,[(0,s._)("p",null,[Fi,(0,s._)("b",null,(0,m.zw)(+o.orderInfo.deliveryType.price?`${o.orderInfo.deliveryType.price} ₽`:"бесплатно"),1)]),(0,s._)("p",null,[Pi,(0,s._)("b",null,(0,m.zw)(o.orderInfo.basket.items.length),1),$i,(0,s._)("b",null,(0,m.zw)(o.orderInfo.totalPrice)+" ₽",1)])])])])])]))}var zi={computed:{orderInfo(){return this.$store.state.orderInfo},isLoading(){return this.$store.state.isLoading},isLoadingFailed(){return this.$store.state.isLoadingFailed}},created(){this.$store.dispatch("loadOrderInfo",this.$route.params.id)}};const Ai=(0,v.Z)(zi,[["render",Li]]);var Si=Ai;function Ti(e,t){return(0,s.wg)(),(0,s.iD)("h1",null,"Страница не найдена. Попробуйте поискать что-нибудь другое.")}const Vi={},xi=(0,v.Z)(Vi,[["render",Ti]]);var Ui=xi;const Ei=[{path:"/",name:"main",component:dt},{path:"/cart",name:"cart",component:ma},{path:"/product/:id",name:"product",component:kr},{path:"/order",name:"order",component:js},{path:"/order/:id",name:"orderInfo",component:Si},{path:"/notFound(.*)*",name:"notfound",component:Ui}],Mi=(0,U.p7)({history:(0,U.r5)(),routes:Ei});var Ki=Mi,Oi={cart(e){return e.cartData.map((t=>{const a=e.cartProductsData.find((e=>e.product.id===t.productId));return{...a,...t}}))},cartProductsData(e){return e.cartProductsData},cartTotalPrice(e,t){return t.cart.reduce(((e,t)=>e+t.price*t.quantity),0)},cartTotalQuantity(e,t){return t.cart.length}},Wi={setProducts(e,t){e.productsData=t},setProductData(e,t){e.productData=t},setCategories(e,t){e.categoriesData=t},setColors(e,t){e.colorsData=t},setMaterials(e,t){e.materialsData=t},setSeasons(e,t){e.seasonsData=t},setDeliveries(e,t){e.deliveriesData=t},setPayments(e,t){e.paymentsData=t},updateAccessKey(e,t){e.userAccessKey=t},syncCartProducts(e){e.cartData=e.cartProductsData.map((e=>({productId:e.product.id,quantity:e.quantity})))},updateCart(e,t){e.cartProductsData=t},updateCartProductQuantity(e,t){const a=e.cartData.find((e=>e.productId===t.productId));a&&(a.quantity=t.quantity)},deleteCartProduct(e,t){e.cartData=e.cartData.filter((e=>e.productId!==t.productId))},resetCart(e){e.cartProductsData=[],e.cartData=[]},updateOrderInfo(e,t){e.orderInfo=t},updateOrderError(e,t){e.orderErrorInfo=t},resetOrderError(e){e.orderErrorInfo=null},resetFormErrorMessage(e){e.formErrorMessage=null},updateOrderErrorMessage(e,t){e.orderErrorMessage=t}},ji={async loadProducts(e,t){e.state.isLoading=!0,e.state.isLoadingFailed=!1;try{const{data:a}=await Jt().get(`${Nt}/products`,{params:t});e.commit("setProducts",a)}catch(a){e.state.isLoadingFailed=!0,e.state.isLoading=!1}finally{e.state.isLoading=!1}},async loadFilters(e){e.state.areFiltersLoading=!0,e.state.areFiltersLoadingFailed=!1;try{const t=await Jt().get(`${Nt}/productCategories`);e.commit("setCategories",t.data.items);const a=await Jt().get(`${Nt}/colors`);e.commit("setColors",a.data.items);const r=await Jt().get(`${Nt}/materials`);e.commit("setMaterials",r.data.items);const s=await Jt().get(`${Nt}/seasons`);e.commit("setSeasons",s.data.items)}catch(t){e.state.areFiltersLoadingFailed=!0}finally{e.state.areFiltersLoading=!1}},async loadDeliveries(e){const{data:t}=await Jt().get(`${Nt}/deliveries`);e.commit("setDeliveries",t)},async loadPayments(e,t){e.state.isLoading=!0,e.state.isLoadingFailed=!1;try{const{data:a}=await Jt().get(`${Nt}/payments`,{params:t});e.commit("setPayments",a)}catch(a){e.state.isLoadingFailed=!0}finally{e.state.isLoading=!1}},async addToCart(e,t){e.state.isSending=!0,e.state.isSendingFailed=!1,e.state.isAdded=!1;try{const{data:a}=await Jt().post(`${Nt}/baskets/products`,t,{params:{userAccessKey:e.state.userAccessKey}});e.commit("updateCart",a.items),e.commit("syncCartProducts")}catch(a){e.state.isSendingFailed=!0}e.state.isSending=!1,e.state.isAdded=!0},async loadCart(e){e.state.isCartLoading=!0,e.state.isCartLoadingFailed=!1;try{const{data:t}=await Jt().get(`${Nt}/baskets`,{params:{userAccessKey:e.state.userAccessKey}});e.state.userAccessKey||(localStorage.setItem("userAccessKey",t.user.accessKey),e.commit("updateAccessKey",t.user.accessKey)),e.commit("updateCart",t.items),e.commit("syncCartProducts")}catch(t){e.state.isCartLoadingFailed=!0}finally{e.state.isCartLoading=!1}},async deleteFromCart(e,t){try{const{data:a}=await Jt()["delete"](`${Nt}/baskets/products`,{params:{userAccessKey:e.state.userAccessKey},data:t});e.commit("updateCart",a.items),e.commit("syncCartProducts")}catch(a){e.commit("syncCartProducts")}},async sendOrder(e,t){e.state.isSending=!0,e.state.isSendingFailed=!1;try{e.commit("resetOrderError"),e.commit("resetFormErrorMessage");const{data:a}=await Jt().post(`${Nt}/orders`,t,{params:{userAccessKey:e.state.userAccessKey}});e.commit("updateOrderInfo",a),e.commit("resetCart"),Ki.push({name:"orderInfo",params:{id:a.id}})}catch(a){e.state.isSendingFailed=!0,e.commit("updateOrderError",a.response.data.error.request),e.commit("updateOrderErrorMessage",a.response.data.error.message)}finally{e.state.isSending=!1}},async loadOrderInfo(e,t){e.state.isLoading=!0,e.state.isLoadingFailed=!1;try{const{data:a}=await Jt().get(`${Nt}/orders/${t}`,{params:{userAccessKey:e.state.userAccessKey}});e.commit("updateOrderInfo",a)}catch(a){e.state.isLoadingFailed=!0}finally{e.state.isLoading=!1}}},qi=(0,o.MT)({state:{productsData:null,productData:null,categoriesData:null,colorsData:null,materialsData:null,seasonsData:null,deliveriesData:null,paymentsData:null,areFiltersLoading:!1,areFiltersLoadingFailed:!1,userAccessKey:null,isLoading:!1,isLoadingFailed:!1,isSending:!1,isSendingFailed:!1,cartData:[],cartProductsData:[],cartError:null,isCartLoading:!1,isCartLoadingFailed:!1,orderInfo:null,orderErrorInfo:null,orderErrorMessage:null,formErrorMessage:null},getters:Oi,mutations:Wi,actions:ji});function Zi(e,t,a,r,i,o){return(0,s.wg)(),(0,s.iD)("div",{class:(0,m.C_)(["loader",a.size])},null,2)}var Hi={props:["size"]};const Yi=(0,v.Z)(Hi,[["render",Zi]]);var Bi=Yi;const Qi=(0,r.ri)(x);Qi.use(qi),Qi.use(Ki),Qi.component("base-loader",Bi),Qi.mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,r,s,i){if(!r){var o=1/0;for(d=0;d<e.length;d++){r=e[d][0],s=e[d][1],i=e[d][2];for(var l=!0,n=0;n<r.length;n++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[n])}))?r.splice(n--,1):(l=!1,i<o&&(o=i));if(l){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,i,o=r[0],l=r[1],n=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(n)var d=n(a)}for(t&&t(r);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},r=self["webpackChunkmoire"]=self["webpackChunkmoire"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(1742)}));r=a.O(r)})();
//# sourceMappingURL=app.5e05dec3.js.map